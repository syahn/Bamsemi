var app=app||{};app.ViewModel=function(){"use strict";var e=this;e.cafes=ko.observableArray(app.model.locations),e.showFilter=ko.observable(!0),e.buttonClass=ko.observable(!1),e.currentFilter=ko.observableArray(["hollys","tomntoms","angelinus","coffeesmith"]),e.classes=ko.observableArray([{class:"tomntoms"},{class:"hollys"},{class:"angelinus"},{class:"coffeesmith"}]),e.focusList=function(n){var r=e.findMarkerIndex(n);app.mv.markers[r].setAnimation(google.maps.Animation.BOUNCE)},e.unfocusList=function(n){var r=e.findMarkerIndex(n);app.mv.markers[r].setAnimation(null)},e.textSearchPlaces=function(){return app.mv.textSearchPlaces()},e.showListings=function(){return app.mv.infoWindow.close(),app.mv.showListings()},e.hideMarkers=function(){return app.mv.hideMarkers(app.mv.markers)},e.openInfoWindow=function(n){var r=e.findMarkerIndex(n);app.mv.populateInfoWindow(app.mv.markers[r],app.mv.infoWindow,app.model.locations[r])},e.findMarkerIndex=function(n){return e.cafes.indexOf(n)},e.toggleFilter=function(){e.showFilter(!e.showFilter())},e.activateFilter=function(){return e.showCafes(),!0},e.eliminateDuplicates=function(e){var n,r=e.length,a=[],s={};for(n=0;n<r;n++)s[e[n]]=0;for(n in s)a.push(n);return a},e.showCafes=function(){var n=[],r=[];return 4===e.currentFilter().length?(app.mv.markers.forEach(function(e){e.setVisible(!0)}),e.cafes()):0!==e.currentFilter().length?(e.currentFilter().forEach(function(a){for(var s=0;s<e.cafes().length;s++){app.mv.markers[s].setVisible(!1);var o=e.cafes()[s];o.class===a&&(r.push(o),n.push(s))}}),e.eliminateDuplicates(n).forEach(function(e){app.mv.markers[e].setVisible(!0)}),app.mv.infoWindow.close(),r):void app.mv.markers.forEach(function(e){e.setVisible(!1)})}};