var app=app||{};app.ViewModel=function(){"use strict";var e=this;e.cafes=ko.observableArray(app.model.locations),e.showFilter=ko.observable(!0),e.buttonClass=ko.observable(!1),e.currentFilter=ko.observableArray(["hollys","tomntoms","angelinus","coffeesmith"]),e.classes=ko.observableArray([{class:"hollys"},{class:"tomntoms"},{class:"angelinus"},{class:"coffeesmith"}]),e.focusList=function(a){var n=e.findMarkerIndex(a);app.mv.markers[n].setAnimation(google.maps.Animation.BOUNCE)},e.unfocusList=function(a){var n=e.findMarkerIndex(a);app.mv.markers[n].setAnimation(null)},e.openInfoWindow=function(a){var n=e.findMarkerIndex(a);app.mv.populateInfoWindow(app.mv.markers[n],app.mv.infoWindow,app.model.locations[n])},e.findMarkerIndex=function(a){return e.cafes.indexOf(a)},e.toggleFilter=function(){e.showFilter(!e.showFilter())},e.activateFilter=function(){return e.showCafes(),!0},e.eliminateDuplicates=function(e){var a,n=e.length,r=[],s={};for(a=0;a<n;a++)s[e[a]]=0;for(a in s)r.push(a);return r},e.showCafes=function(){var a=[],n=[];return 4===e.currentFilter().length?(app.mv.markers.forEach(function(e){e.setVisible(!0)}),e.cafes()):0!==e.currentFilter().length?(e.currentFilter().forEach(function(r){for(var s=0;s<e.cafes().length;s++){app.mv.markers[s].setVisible(!1);var o=e.cafes()[s];o.class===r&&(n.push(o),a.push(s))}}),e.eliminateDuplicates(a).forEach(function(e){app.mv.markers[e].setVisible(!0)}),app.mv.infoWindow.close(),n):void app.mv.markers.forEach(function(e){e.setVisible(!1)})}};